<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" th:href="@{/images/logo.png}" href="/images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <title>MediaBook</title>
    <style>
        /* Ki·ªÉu cho khung ch·ª©a ·∫£nh preview */
        .preview-wrapper {
            position: relative;
            border: 1px solid #ccd0d5;
            border-radius: 8px;
            padding: 8px;
        }

        .preview-wrapper img {
            width: 100%;
            max-height: 400px; /* Gi·ªõi h·∫°n chi·ªÅu cao ·∫£nh */
            object-fit: cover;
            border-radius: 8px;
        }

        /* C√°c n√∫t h√†nh ƒë·ªông tr√™n ·∫£nh */
        .preview-actions {
            position: absolute;
            top: 16px;
            left: 16px;
            display: flex;
            gap: 8px;
        }

        .preview-actions .action-btn {
            background-color: #FFFFFF;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .preview-actions .action-btn:hover {
            background-color: #f0f2f5;
        }

        /* N√∫t x√≥a ·∫£nh preview (d·∫•u X) */
        .remove-image-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background-color: #FFFFFF;
            border: 1px solid #ccd0d5;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 18px;
            font-weight: bold;
            color: #606770;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .remove-image-btn:hover {
            background-color: #f0f2f5;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
<!--    nav-->
<nav class="flex items-center justify-between bg-white px-6 py-3 shadow">
    <div class="flex items-center space-x-4">
        <img th:src="@{/images/logo.png}" src="/images/logo.png" alt="Logo" class="h-10 w-10 rounded-full">
        <input type="text" placeholder="Search Mediabook.."
               class="border rounded px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400">
    </div>
    <div class="flex space-x-6">
        <a href="#" class="text-blue-600">
            <i class="fa fa-home text-2xl"></i>
        </a>
        <a href="#" class="text-gray-600 hover:text-blue-600">
            <i class="fa fa-user-friends text-2xl"></i>
        </a>
        <a href="#" class="text-gray-600 hover:text-blue-600">
            <i class="fa fa-play-circle text-2xl"></i>
        </a>
        <a href="#" class="text-gray-600 hover:text-blue-600">
            <i class="fa fa-users text-2xl"></i>
        </a>
    </div>
    <div class="flex items-center space-x-4">
        <span>
            <a th:href="@{/facebook/profile}">
            <img th:src="@{/images/default-avatar.svg}"
                 src="/images/default-avatar.svg"
                 alt="Profile" class="h-10 w-10 rounded-full object-cover">
            </a>
        </span>
        <a href="#" class="text-gray-600 hover:text-blue-600">
            <i class="fa fa-bell text-xl"></i>
        </a>
        <div class="relative">
            <!-- N√∫t m·ªü menu -->
            <button id="menu-button" class="flex items-center text-gray-600 hover:text-blue-600 focus:outline-none">
                <i class="fas fa-ellipsis-h text-xl"></i>
            </button>
            <!-- Menu dropdown -->
            <div id="dropdown-menu"
                 class="hidden absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
                <ul class="py-2">
                    <li>
                        <a href="/facebook/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                            H·ªì s∆° c√° nh√¢n
                        </a>
                    </li>
                    <li>
                        <a href="/settings" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                            C√†i ƒë·∫∑t
                        </a>
                    </li>
                    <li>
                        <form th:action="@{/logout}" method="post" class="block">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button type="submit" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100">
                                ƒêƒÉng xu·∫•t
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="container mx-auto flex mt-6 space-x-6">
    <!-- Left Panel -->
    <div class="w-1/4 bg-white rounded-lg shadow p-4">
        <ul class="space-y-3">
            <li class="flex items-center space-x-3">
                <a th:href="@{/facebook/profile}" class="flex items-center space-x-3">
                <span>
                    <img th:src="@{/images/default-avatar.svg}"
                         src="/images/default-avatar.svg"
                         alt="Profile" class="h-10 w-10 rounded-full object-cover">
                </span>
                    <p th:text="${user.firstName} + ' ' + ${user.lastName}">User Name</p>
                </a>
            </li>
            <li class="flex items-center space-x-3"><i class="fa fa-user-friends"></i>
                <p>Friends</p></li>
            <li class="flex items-center space-x-3"><i class="fa fa-play-circle"></i>
                <p>Videos</p></li>
            <li class="flex items-center space-x-3"><i class="fa fa-flag"></i>
                <p>Pages</p></li>
            <li class="flex items-center space-x-3"><i class="fa fa-users"></i>
                <p>Groups</p></li>
            <li class="flex items-center space-x-3"><i class="fa fa-bookmark"></i>
                <p>Bookmark</p></li>
            <li class="flex items-center space-x-3"><i class="fab fa-facebook-messenger"></i>
                <p>Inbox</p></li>
            <li class="flex items-center space-x-3"><i class="fas fa-calendar-week"></i>
                <p>Events</p></li>
            <li class="flex items-center space-x-3"><i class="fa fa-bullhorn"></i>
                <p>Ads</p></li>
            <li class="flex items-center space-x-3"><i class="fas fa-hands-helping"></i>
                <p>Offers</p></li>
            <li class="flex items-center space-x-3"><i class="fas fa-briefcase"></i>
                <p>Jobs</p></li>
            <li class="flex items-center space-x-3"><i class="fa fa-star"></i>
                <p>Favourites</p></li>
        </ul>
        <div class="mt-6 flex flex-wrap gap-2 text-xs text-gray-500">
            <a href="#" class="hover:underline">Privacy</a>
            <a href="#" class="hover:underline">Terms</a>
            <a href="#" class="hover:underline">Advance</a>
            <a href="#" class="hover:underline">More</a>
        </div>
    </div>

    <!-- Middle Panel -->
    <div class="w-2/4 space-y-6">
        <!-- Story Section -->
        <div class="flex space-x-3">
            <!-- Create Story -->
            <div class="flex flex-col items-center bg-white rounded-lg p-2 shadow w-24">
                <div class="relative">
                    <img th:src="@{/images/default-avatar.svg}"
                         src="/images/default-avatar.svg"
                         alt="Profile pic" class="h-16 w-16 rounded-full border-2 border-blue-500">
                    <span class="absolute bottom-0 right-0 bg-blue-500 text-white rounded-full p-1">
                        <i class="fa fa-plus"></i>
                    </span>
                </div>
                <span class="mt-2 text-xs font-semibold">Create Story</span>
            </div>
            <!-- Stories m·∫´u test -->
            <div class="flex flex-col items-center bg-white rounded-lg p-2 shadow w-24">
                <img th:src="@{/images/model.jpg}" src="/images/model.jpg" alt="Story" class="h-16 w-16 rounded-lg">
                <div class="relative -mt-6 mb-2">
                    <img th:src="@{/images/girl.jpg}" src="/images/girl.jpg" alt=""
                         class="h-6 w-6 rounded-full border-2 border-white">
                </div>
                <p class="text-xs font-semibold">Anuska Sharma</p>
            </div>
            <div class="flex flex-col items-center bg-white rounded-lg p-2 shadow w-24">
                <img th:src="@{/images/boy.jpg}" src="/images/boy.jpg" alt="Story" class="h-16 w-16 rounded-lg">
                <div class="relative -mt-6 mb-2">
                    <img th:src="@{/images/dp.jpg}" src="/images/dp.jpg" alt=""
                         class="h-6 w-6 rounded-full border-2 border-white">
                </div>
                <p class="text-xs font-semibold">Gaurav Gall</p>
            </div>
            <div class="flex flex-col items-center bg-white rounded-lg p-2 shadow w-24">
                <img th:src="@{/images/mountains.jpg}" src="/images/mountains.jpg" alt="Story"
                     class="h-16 w-16 rounded-lg">
                <div class="relative -mt-6 mb-2">
                    <img th:src="@{/images/boy.jpg}" src="/images/boy.jpg" alt=""
                         class="h-6 w-6 rounded-full border-2 border-white">
                </div>
                <p class="text-xs font-semibold">Priyank Saksena</p>
            </div>
            <div class="flex flex-col items-center bg-white rounded-lg p-2 shadow w-24">
                <img th:src="@{/images/shoes.jpg}" src="/images/shoes.jpg" alt="Story" class="h-16 w-16 rounded-lg">
                <div class="relative -mt-6 mb-2">
                    <img th:src="@{/images/model.jpg}" src="/images/model.jpg" alt=""
                         class="h-6 w-6 rounded-full border-2 border-white">
                </div>
                <p class="text-xs font-semibold">Pragati Adhikari</p>
            </div>
        </div>

        <!-- Create Post -->
        <!--        <div class="bg-white rounded-lg shadow p-4">-->
        <!--            <form th:action="@{/facebook/status/post}" method="post">-->
        <!--                <div class="flex items-center space-x-3 mb-3">-->
        <!--                    <div class="h-10 w-10 rounded-full overflow-hidden">-->
        <!--                        <img th:src="@{/images/default-avatar.svg}" alt="">-->
        <!--                    </div>-->
        <!--                    <input type="text" name="content"-->
        <!--                           th:placeholder="'What\'s on your mind, ' + ${user.firstName} + ' ?'"-->
        <!--                           class="flex-1 border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">-->
        <!--                </div>-->
        <!--                <div class="flex justify-between mt-2">-->
        <!--                    <input type="text" name="picture" placeholder="Image URL (optional)"-->
        <!--                           class="flex-1 border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 mr-2">-->
        <!--                    <button type="submit"-->
        <!--                            class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">-->
        <!--                        Post-->
        <!--                    </button>-->
        <!--                </div>-->
        <!--            </form>-->
        <!--        </div>-->
        <div class="bg-white rounded-lg shadow p-4">
            <div class="flex items-center space-x-3">
                <a th:href="@{/facebook/profile}">
                    <div class="h-10 w-10 rounded-full overflow-hidden flex-shrink-0">
                        <img th:src="@{/images/default-avatar.svg}" alt="Avatar">
                    </div>
                </a>
                <div class="flex-1 bg-[#f0f2f5] rounded-full px-4 py-2 text-gray-500 hover:bg-gray-200 cursor-pointer"
                     onclick="openCreatePostModal()">

            <span th:text="${user.firstName} + ' ∆°i, b·∫°n ƒëang nghƒ© g√¨ th·∫ø?'">
                B·∫°n ƒëang nghƒ© g√¨ th·∫ø?
            </span>
                </div>
            </div>

            <hr class="my-3">

            <div class="flex justify-around text-sm">
                <div class="flex items-center justify-center gap-x-2 w-1/3 py-2 rounded-lg hover:bg-gray-100 cursor-pointer">
                    <img src="https://static.xx.fbcdn.net/rsrc.php/v4/yr/r/c0dWho49-X3.png" alt="Live Video Icon"
                         class="w-6 h-6">
                    <span class="font-semibold text-gray-600">Video tr·ª±c ti·∫øp</span>
                </div>

                <div onclick="document.getElementById('pictureFileInput').click(); openCreatePostModal()"
                     class="flex items-center justify-center gap-x-2 w-1/3 py-2 rounded-lg hover:bg-gray-100 cursor-pointer">
                    <img src="https://static.xx.fbcdn.net/rsrc.php/v4/y7/r/Ivw7nhRtXyo.png" alt="Photo/Video Icon"
                         class="w-6 h-6">
                    <span class="font-semibold text-gray-600">·∫¢nh/video</span>
                </div>

                <div class="flex items-center justify-center gap-x-2 w-1/3 py-2 rounded-lg hover:bg-gray-100 cursor-pointer">
                    <img src="https://static.xx.fbcdn.net/rsrc.php/v4/yd/r/Y4mYLVOhTwq.png" alt="Feeling/Activity Icon"
                         class="w-6 h-6">
                    <span class="font-semibold text-gray-600">C·∫£m x√∫c/ho·∫°t ƒë·ªông</span>
                </div>
            </div>
        </div>

        <div id="createPostModal"
             class="fixed inset-0 bg-white bg-opacity-80 hidden items-center justify-center z-50 p-4">
            <div class="bg-white w-full max-w-lg rounded-lg shadow-xl border border-gray-300 flex flex-col"
                 style="height: 500px;">
                <div class="relative flex-shrink-0 flex justify-center items-center border-b p-3">
                    <h2 class="text-xl font-bold">T·∫°o b√†i vi·∫øt</h2>
                    <button onclick="closeCreatePostModal()"
                            class="absolute right-3 top-1/2 -translate-y-1/2 bg-gray-200 hover:bg-gray-300 rounded-full w-9 h-9 flex items-center justify-center text-gray-600 text-2xl">
                        &times;
                    </button>
                </div>

                <form th:action="@{/facebook/status/homepost}" method="post" enctype="multipart/form-data"
                      class="p-4 flex flex-col flex-grow overflow-y-auto">
                    <div class="flex-shrink-0 flex items-center space-x-3 mb-4">
                        <div class="h-10 w-10 rounded-full overflow-hidden">
                            <img th:src="@{/images/default-avatar.svg}" alt="Avatar">
                        </div>
                        <div>
                            <p class="font-semibold" th:text="${user.firstName} + ' ' + ${user.lastName}">User Name</p>
                            <button type="button" id="privacyButton" onclick="openPrivacyModal()"
                                    class="bg-gray-200 rounded px-2 py-0.5 text-xs font-semibold text-gray-700 flex items-center gap-x-1 hover:bg-gray-300">
                                <i class="fas fa-user-friends text-xs"></i>
                                <span id="privacyButtonText">B·∫°n b√®</span>
                                <i class="fas fa-caret-down text-xs ml-1"></i>
                            </button>
                            <input type="hidden" id="privacyInput" name="privacy" value="friends">
                        </div>
                    </div>

                    <div class="flex-grow relative">
                <textarea id="postContentTextarea" name="content"
                          th:placeholder="${user.firstName} + ' ∆°i, b·∫°n ƒëang nghƒ© g√¨ th·∫ø?'"
                          class="w-full h-full border-none focus:outline-none resize-none text-2xl placeholder-gray-500 p-0 bg-transparent overflow-y-auto"></textarea>
                        <i class="far fa-smile text-gray-400 text-2xl absolute bottom-6 right-0 cursor-pointer"></i>
                    </div>

                    <div id="imagePreviewContainer" class="flex-shrink-0 mt-3 hidden"></div>

                    <div class="flex-shrink-0 flex items-center justify-between border border-gray-300 rounded-lg p-3 mt-3">
                        <span class="font-semibold text-gray-600">Th√™m v√†o b√†i vi·∫øt c·ªßa b·∫°n</span>
                        <div class="flex items-center space-x-2">
                            <label for="pictureFileInput" class="cursor-pointer" title="·∫¢nh/video"><img
                                    src="https://static.xx.fbcdn.net/rsrc.php/v4/y7/r/Ivw7nhRtXyo.png" alt="Photo/Video"
                                    class="w-6 h-6"></label>
                            <input type="file" id="pictureFileInput" name="pictureFile" accept="image/*" class="hidden">
                            <img src="https://static.xx.fbcdn.net/rsrc.php/v4/yq/r/b37mHA1PjfK.png" alt="Tag People"
                                 class="w-6 h-6 cursor-pointer" title="G·∫Øn th·∫ª ng∆∞·ªùi kh√°c">
                            <img src="https://static.xx.fbcdn.net/rsrc.php/v4/yd/r/Y4mYLVOhTwq.png"
                                 alt="Feeling/Activity" class="w-6 h-6 cursor-pointer" title="C·∫£m x√∫c/ho·∫°t ƒë·ªông">
                            <img src="https://static.xx.fbcdn.net/rsrc.php/v4/y1/r/8zlaieBcZ72.png" alt="Check In"
                                 class="w-6 h-6 cursor-pointer" title="Check in">
                            <img src="https://static.xx.fbcdn.net/rsrc.php/v4/yT/r/q7MiRkL7MLC.png" alt="GIF"
                                 class="w-6 h-6 cursor-pointer" title="GIF">
                            <i class="fas fa-ellipsis-h text-gray-500 cursor-pointer"></i>
                        </div>
                    </div>

                    <button id="postSubmitButton" type="submit" disabled
                            class="flex-shrink-0 w-full bg-gray-200 text-gray-400 font-bold py-2 px-4 rounded-lg mt-3 cursor-not-allowed">
                        ƒêƒÉng
                    </button>
                </form>
            </div>
        </div>

        <div id="privacyModal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4">
            <div class="bg-white w-full max-w-lg rounded-lg shadow-xl border">
                <div class="relative flex justify-center items-center border-b p-3">
                    <button onclick="closePrivacyModal()"
                            class="absolute left-3 top-1/2 -translate-y-1/2 bg-gray-200 hover:bg-gray-300 rounded-full w-9 h-9 flex items-center justify-center">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="text-xl font-bold">ƒê·ªëi t∆∞·ª£ng c·ªßa b√†i vi·∫øt</h2>
                </div>
                <div class="p-4 space-y-2">
                    <div class="font-semibold">Ai c√≥ th·ªÉ xem b√†i vi·∫øt c·ªßa b·∫°n?</div>
                    <p class="text-sm text-gray-600">B√†i vi·∫øt c·ªßa b·∫°n s·∫Ω hi·ªÉn th·ªã tr√™n B·∫£ng tin, trang c√° nh√¢n v√† k·∫øt
                        qu·∫£ t√¨m ki·∫øm.</p>

                    <label class="flex items-center justify-between p-2 rounded-lg hover:bg-gray-100 cursor-pointer">
                        <div class="flex items-center gap-x-3">
                            <div class="bg-gray-200 rounded-full w-12 h-12 flex items-center justify-center"><i
                                    class="fas fa-globe-americas text-2xl"></i></div>
                            <div>
                                <div class="font-semibold">C√¥ng khai</div>
                                <p class="text-sm text-gray-600">B·∫•t k·ª≥ ai ·ªü tr√™n ho·∫∑c ngo√†i Facebook</p>
                            </div>
                        </div>
                        <input type="radio" name="privacy_option" value="public"
                               onchange="selectPrivacy('public', 'C√¥ng khai', 'fa-globe-americas')">
                    </label>

                    <label class="flex items-center justify-between p-2 rounded-lg hover:bg-gray-100 cursor-pointer bg-blue-100">
                        <div class="flex items-center gap-x-3">
                            <div class="bg-gray-200 rounded-full w-12 h-12 flex items-center justify-center"><i
                                    class="fas fa-user-friends text-2xl"></i></div>
                            <div>
                                <div class="font-semibold">B·∫°n b√®</div>
                                <p class="text-sm text-gray-600">B·∫°n b√® c·ªßa b·∫°n tr√™n Facebook</p>
                            </div>
                        </div>
                        <input type="radio" name="privacy_option" value="friends"
                               onchange="selectPrivacy('friends', 'B·∫°n b√®', 'fa-user-friends')" checked>
                    </label>

                    <label class="flex items-center justify-between p-2 rounded-lg hover:bg-gray-100 cursor-pointer">
                        <div class="flex items-center gap-x-3">
                            <div class="bg-gray-200 rounded-full w-12 h-12 flex items-center justify-center"><i
                                    class="fas fa-lock text-2xl"></i></div>
                            <div>
                                <div class="font-semibold">Ch·ªâ m√¨nh t√¥i</div>
                            </div>
                        </div>
                        <input type="radio" name="privacy_option" value="private"
                               onchange="selectPrivacy('private', 'Ch·ªâ m√¨nh t√¥i', 'fa-lock')">
                    </label>

                </div>
                <div class="p-4 flex justify-end gap-x-2 border-t">
                    <button onclick="closePrivacyModal()"
                            class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 font-semibold">H·ªßy
                    </button>
                    <button onclick="closePrivacyModal()"
                            class="px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-semibold">Xong
                    </button>
                </div>
            </div>
        </div>

        <script>
            // --- C√°c h√†m c√≥ s·∫µn ---
            function openCreatePostModal() { /* ... */
            }

            const postContentTextarea = document.getElementById('postContentTextarea');
            /* ... c√°c const kh√°c ... */

            // =============================================
            // SCRIPT M·ªöI: ƒêI·ªÄU KHI·ªÇN MODAL CH·ªåN ƒê·ªêI T∆Ø·ª¢NG
            // =============================================
            const createPostModal = document.getElementById('createPostModal');
            const privacyModal = document.getElementById('privacyModal');
            const privacyButtonText = document.getElementById('privacyButtonText');
            const privacyButton = document.getElementById('privacyButton');
            const privacyInput = document.getElementById('privacyInput');

            function openPrivacyModal() {
                privacyModal.classList.remove('hidden');
                privacyModal.classList.add('flex');
            }

            function closePrivacyModal() {
                privacyModal.classList.add('hidden');
                privacyModal.classList.remove('flex');
            }

            function selectPrivacy(value, text, iconClass) {

                privacyInput.value = value;


                privacyButtonText.textContent = text;


                const icon = privacyButton.querySelector('i');
                icon.className = `fas ${iconClass} text-xs`;


                closePrivacyModal();
            }


            function openCreatePostModal() {
                document.getElementById("createPostModal").classList.remove("hidden");
                document.getElementById("createPostModal").classList.add("flex");
            }

            const pictureFileInput = document.getElementById('pictureFileInput');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const postSubmitButton = document.getElementById('postSubmitButton');

            function updatePostButtonState() {
                const hasText = postContentTextarea.value.trim() !== '';
                const hasImage = pictureFileInput.files.length > 0;
                if (hasText || hasImage) {
                    postSubmitButton.disabled = false;
                    postSubmitButton.classList.remove('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                    postSubmitButton.classList.add('bg-blue-500', 'text-white', 'hover:bg-blue-600');
                } else {
                    postSubmitButton.disabled = true;
                    postSubmitButton.classList.add('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
                    postSubmitButton.classList.remove('bg-blue-500', 'text-white', 'hover:bg-blue-600');
                }
            }

            pictureFileInput.addEventListener('change', function (event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const previewHtml = `<div class="preview-wrapper"><img src="${e.target.result}" alt="Image Preview"><div class="preview-actions"><button type="button" class="action-btn"><i class="fas fa-edit"></i> Ch·ªânh s·ª≠a</button></div><button type="button" class="remove-image-btn" onclick="removeImagePreview()">&times;</button></div>`;
                        imagePreviewContainer.innerHTML = previewHtml;
                        imagePreviewContainer.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
                updatePostButtonState();
            });

            function removeImagePreview() {
                imagePreviewContainer.innerHTML = '';
                imagePreviewContainer.classList.add('hidden');
                pictureFileInput.value = null;
                updatePostButtonState();
            }

            postContentTextarea.addEventListener('input', updatePostButtonState);

            function closeCreatePostModal() {
                document.getElementById("createPostModal").classList.add("hidden");
                document.getElementById("createPostModal").classList.remove("flex");
                removeImagePreview();
                postContentTextarea.value = '';
            }
        </script>

        <div th:each="status : ${statuses}" class="bg-white rounded-lg shadow p-4 mt-4">
            <div class="flex items-center justify-between mb-2">
                <div class="flex items-center space-x-3">
                    <div class="h-10 w-10 rounded-full overflow-hidden">
                        <img th:src="@{/images/default-avatar.svg}" alt="">
                    </div>
                    <div>
                        <p class="font-semibold" th:text="${status.user.firstName} + ' ' + ${status.user.lastName}">User
                            Name</p>
                        <span class="text-xs text-gray-500"
                              th:text="${#temporals.format(status.createdTime, 'dd/MM/yyyy HH:mm')}">Just now</span>
                    </div>
                </div>
            </div>
            <div class="mb-2 text-gray-800" th:text="${status.content}">Post content here</div>

            <div th:if="${status.picture != null and !status.picture.isEmpty()}">
                <img th:src="@{/images/{filename}(filename=${status.picture})}" alt="Post Image"
                     class="mt-2 rounded-lg w-full">
            </div>

            <div class="flex justify-between text-gray-500 text-sm mt-2">
                <div class="flex items-center space-x-1 cursor-pointer hover:text-blue-500">
                    <i class="far fa-thumbs-up"></i><span>Th√≠ch</span>
                </div>
                <div class="flex items-center space-x-1 cursor-pointer hover:text-blue-500">
                    <i class="far fa-comment"></i><span>B√¨nh lu·∫≠n</span>
                </div>
                <div class="flex items-center space-x-1 cursor-pointer hover:text-blue-500">
                    <i class="fa fa-share"></i><span>Chia s·∫ª</span>
                </div>
            </div>
        </div>

        <!-- Post m·∫´u test -->
        <div class="bg-white rounded-lg shadow p-4">
            <div class="flex items-center justify-between mb-2">
                <div class="flex items-center space-x-3">
                    <div class="h-10 w-10 rounded-full overflow-hidden">
                        <img th:src="@{/images/girl.jpg}" src="/images/girl.jpg" alt="">
                    </div>
                    <div>
                        <p class="font-semibold">Anuska Sharma</p>
                        <span class="text-xs text-gray-500">12 hrs ago</span>
                    </div>
                </div>
                <i class="fas fa-ellipsis-h text-gray-400"></i>
            </div>
            <div class="mb-2 text-gray-800">
                Roses are red <br>
                Violets are blue <br>
                I'm ugly & you are tooüòè
            </div>
            <div class="flex justify-between text-gray-500 text-sm mt-2">
                <div class="flex items-center space-x-1 cursor-pointer hover:text-blue-500">
                    <i class="far fa-thumbs-up"></i><span>Th√≠ch</span>
                </div>
                <div class="flex items-center space-x-1 cursor-pointer hover:text-blue-500">
                    <i class="far fa-comment"></i><span>B√¨nh Lu·∫≠n</span>
                </div>
                <div class="flex items-center space-x-1 cursor-pointer hover:text-blue-500">
                    <i class="fa fa-share"></i><span>Chia s·∫ª</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel -->
    <div class="w-1/4 space-y-6">
        <div class="bg-white rounded-lg shadow p-4">
            <h4 class="font-semibold mb-2">Your pages</h4>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/logo.png}" src="/images/logo.png" alt="">
                </div>
                <p class="font-medium">Cody</p>
            </a>
            <a class="flex items-center space-x-3" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/dp.jpg}" src="/images/dp.jpg" alt="">
                </div>
                <p class="font-medium">Cody Tutorials</p>
            </a>
        </div>
        <div class="bg-white rounded-lg shadow p-4">
            <h4 class="font-semibold mb-2">Friends</h4>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/dp.jpg}" src="/images/dp.jpg" alt="">
                </div>
                <p class="font-medium">Henry Mosely</p>
            </a>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/shoes.jpg}" src="/images/shoes.jpg" alt="">
                </div>
                <p class="font-medium">George</p>
            </a>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/boy.jpg}" src="/images/boy.jpg" alt="">
                </div>
                <p class="font-medium">Aakash Malhotra</p>
            </a>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/model.jpg}" src="/images/model.jpg" alt="">
                </div>
                <p class="font-medium">Ragini Khanna</p>
            </a>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/boy.jpg}" src="/images/boy.jpg" alt="">
                </div>
                <p class="font-medium">Justin Bieber</p>
            </a>
            <a class="flex items-center space-x-3 mb-2" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/dp.jpg}" src="/images/dp.jpg" alt="">
                </div>
                <p class="font-medium">Ramesh GC</p>
            </a>
            <a class="flex items-center space-x-3" href="#">
                <div class="h-8 w-8 rounded-full overflow-hidden">
                    <img th:src="@{/images/model.jpg}" src="/images/model.jpg" alt="">
                </div>
                <p class="font-medium">Sajita Gurung</p>
            </a>
        </div>
    </div>
</div>
<script>
    const menuButton = document.getElementById('menu-button');
    const dropdownMenu = document.getElementById('dropdown-menu');

    // Toggle menu khi b·∫•m v√†o icon
    menuButton.addEventListener('click', (e) => {
        e.stopPropagation(); // NgƒÉn click lan ra ngo√†i
        dropdownMenu.classList.toggle('hidden');
    });

    // ·∫®n menu khi click ra ngo√†i
    window.addEventListener('click', (e) => {
        if (!dropdownMenu.contains(e.target) && !menuButton.contains(e.target)) {
            dropdownMenu.classList.add('hidden');
        }
    });
</script>
</body>
</html>
